<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>å¤§å˜´é¸Ÿ Â· å­—è¯å­¦ä¹ ç‰ˆ</title>
  <style>
    /* å…¨å±€åŸºç¡€æ ·å¼ï¼ˆå¤§å±é»˜è®¤ï¼‰ */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Microsoft YaHei', sans-serif; }
    body { background: linear-gradient(135deg, #f5fafe 0%, #e8f4f8 100%); min-height: 100vh; }
    .container { width: 100vw; height: 100vh; padding: 2vw; }
    
    /* æ ¸å¿ƒå¸ƒå±€ï¼ˆå¤§å±ä¸‰æ ï¼‰ */
    .landscape-layout { display: flex; width: 100%; height: 100%; background: rgba(255,255,255,0.9); border-radius: 20px; box-shadow: 0 8px 32px rgba(138,173,212,0.15); overflow: hidden; }
    .sidebar-left { width: 280px; padding: 2vw; background: linear-gradient(180deg, #4299e1 0%, #38b2ac 100%); color: white; display: flex; flex-direction: column; gap: 20px; }
    /* ä¸­é—´æ ï¼šæ”¹ä¸ºä¸Šä¸‹ç»“æ„ï¼ˆæ¸¸æˆå…¥å£+åº•éƒ¨è¡¨å•ï¼‰ */
    .game-area { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 2vw; background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5 5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e8f4f8' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E"); }
    .sidebar-right { width: 80px; background: linear-gradient(180deg, #9f7aea 0%, #ed8936 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px; gap: 10px; }
    
    /* AIåŠ©æ‰‹æŒ‰é’® */
    .ai-assistant-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      color: #9f7aea;
      border: none;
      font-size: 28px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .ai-assistant-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      background: rgba(255,255,255,1);
    }
    .ai-assistant-btn:active {
      transform: scale(0.95);
    }
    
    /* åƒé—®AIå¼¹çª— */
    .qianwen-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeIn 0.3s ease;
    }
    .qianwen-modal.active {
      display: flex;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .qianwen-container {
      width: 90%;
      max-width: 1200px;
      height: 85vh;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      animation: slideUp 0.3s ease;
    }
    @keyframes slideUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    .qianwen-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .qianwen-header h3 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .qianwen-header .qianwen-logo {
      font-size: 24px;
    }
    .qianwen-close {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .qianwen-close:hover {
      background: rgba(255,255,255,0.3);
      transform: rotate(90deg);
    }
    .qianwen-iframe-container {
      flex: 1;
      position: relative;
      overflow: hidden;
      background: #f5f7fa;
    }
    .qianwen-iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }
    .qianwen-loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      color: #667eea;
    }
    .qianwen-loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e2e8f0;
      border-top-color: #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* è±†åŒ…AIæ’­å®¢æ’­æ”¾å™¨ */
    .podcast-player {
      position: fixed;
      bottom: 20px;
      right: 100px;
      width: 400px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      display: none;
      flex-direction: column;
      z-index: 1000;
      overflow: hidden;
    }
    .podcast-player.active {
      display: flex;
    }
    .podcast-header {
      background: linear-gradient(135deg, #9f7aea 0%, #ed8936 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .podcast-header h3 {
      margin: 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .podcast-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.3s ease;
    }
    .podcast-close:hover {
      background: rgba(255,255,255,0.2);
    }
    .podcast-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .podcast-info {
      text-align: center;
    }
    .podcast-title {
      font-size: 18px;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 8px;
    }
    .podcast-desc {
      font-size: 14px;
      color: #718096;
      line-height: 1.6;
    }
    .podcast-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
    }
    .podcast-play-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, #9f7aea 0%, #ed8936 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(159,122,234,0.3);
    }
    .podcast-play-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(159,122,234,0.4);
    }
    .podcast-progress {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .podcast-progress-bar {
      width: 100%;
      height: 6px;
      background: #e2e8f0;
      border-radius: 3px;
      overflow: hidden;
      cursor: pointer;
    }
    .podcast-progress-filled {
      height: 100%;
      background: linear-gradient(90deg, #9f7aea 0%, #ed8936 100%);
      width: 0%;
      transition: width 0.1s linear;
    }
    .podcast-time {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #718096;
    }
    .podcast-volume {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .podcast-volume-btn {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #718096;
      transition: color 0.3s ease;
    }
    .podcast-volume-btn:hover {
      color: #9f7aea;
    }
    .podcast-volume-slider {
      width: 80px;
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      cursor: pointer;
      position: relative;
    }
    .podcast-volume-filled {
      height: 100%;
      background: linear-gradient(90deg, #9f7aea 0%, #ed8936 100%);
      width: 100%;
      border-radius: 2px;
    }
    
    /* ç»„ä»¶æ ·å¼ */
    .header-landscape { display: flex; flex-direction: column; gap: 24px; flex-grow: 1; /* è®©å¤´éƒ¨å æ®ä¸Šæ–¹ç©ºé—´ï¼ŒæŠŠ3Då›¾æ¨åˆ°ä¸­éƒ¨åä¸‹ */ }
    .header-landscape h1 { font-size: 28px; font-weight: 700; display: flex; align-items: center; gap: 12px; }
    .fancy-title a { color: white; text-decoration: none; position: relative; }
    .fancy-title a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background: #ffd166; transition: width 0.3s ease; }
    .fancy-title a:hover::after { width: 100%; }
    .link-group { display: flex; flex-direction: column; gap: 16px; }
    .homework-link { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 20px; background: rgba(255,255,255,0.2); color: white; text-decoration: none; border-radius: 12px; font-size: 16px; transition: all 0.3s ease; cursor: pointer; }
    .homework-link:hover { background: white; color: #4299e1; transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.1); }
    .homework-link::before { content: 'ğŸ“‘'; }
    #homework-answer::before { content: 'ğŸ”'; }
    #teacher-classroom::before { content: 'ğŸ“'; }
    /* é“¾æ¥åŠ è½½ä¸­æ ·å¼ */
    .homework-link.loading { opacity: 0.8; cursor: wait; }
    .homework-link.loading:hover { background: rgba(255,255,255,0.2); transform: none; box-shadow: none; }

    /* 3Dçƒä½“æ•ˆæœï¼ˆå·¦æ ä¸­éƒ¨åä¸‹ï¼‰- åŠ¨ç‰©å›¾æ ‡ç‰ˆ */
    .sphere-container {
      width: 100%;
      height: 220px; /* é€‚å½“å¢å¤§é«˜åº¦ï¼Œæå‡è§†è§‰å æ¯” */
      perspective: 800px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 10px; /* è½»å¾®ä¸Šç§»ï¼Œç¡®ä¿åœ¨ä¸­éƒ¨åä¸‹ */
    }
    .sphere {
      width: 180px; /* é€‚å½“å¢å¤§çƒä½“å°ºå¯¸ï¼Œé€‚é…ä¸­éƒ¨ä½ç½® */
      height: 180px;
      position: relative;
      transform-style: preserve-3d;
      animation: rotate 20s linear infinite;
    }
    .sphere-container:hover .sphere {
      animation: rotate 8s linear infinite;
    }
    .sphere-face {
      position: absolute;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(255,255,255,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: #4299e1;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      backface-visibility: hidden;
    }
    /* çƒé¢ä½ç½®åˆ†å¸ƒï¼ˆé€‚é…å¢å¤§çš„çƒä½“ï¼‰ */
    .face-1 { transform: rotateY(0deg) translateZ(90px); }
    .face-2 { transform: rotateY(45deg) translateZ(90px); }
    .face-3 { transform: rotateY(90deg) translateZ(90px); }
    .face-4 { transform: rotateY(135deg) translateZ(90px); }
    .face-5 { transform: rotateY(180deg) translateZ(90px); }
    .face-6 { transform: rotateY(225deg) translateZ(90px); }
    .face-7 { transform: rotateY(270deg) translateZ(90px); }
    .face-8 { transform: rotateY(315deg) translateZ(90px); }
    .face-9 { transform: rotateX(45deg) rotateY(0deg) translateZ(90px); }
    .face-10 { transform: rotateX(45deg) rotateY(90deg) translateZ(90px); }
    .face-11 { transform: rotateX(45deg) rotateY(180deg) translateZ(90px); }
    .face-12 { transform: rotateX(45deg) rotateY(270deg) translateZ(90px); }
    .face-13 { transform: rotateX(-45deg) rotateY(0deg) translateZ(90px); }
    .face-14 { transform: rotateX(-45deg) rotateY(90deg) translateZ(90px); }
    .face-15 { transform: rotateX(-45deg) rotateY(180deg) translateZ(90px); }
    .face-16 { transform: rotateX(-45deg) rotateY(270deg) translateZ(90px); }
    @keyframes rotate {
      0% { transform: rotateX(20deg) rotateY(0deg); }
      100% { transform: rotateX(20deg) rotateY(360deg); }
    }

    /* æ¸¸æˆé“¾æ¥æ ·å¼ï¼ˆä¸­é—´æ ä¸Šæ–¹å±…ä¸­ï¼‰ */
    .game-link-container {
      text-align: center;
      color: #4a5568;
      max-width: 600px;
      padding: 0 20px;
      margin-top: auto; /* å‚ç›´å±…ä¸­ */
    }
    .game-link { color: #38b2ac; text-decoration: none; font-size: 32px; font-weight: 700; margin-bottom: 24px; transition: all 0.3s ease; }
    .game-link:hover { color: #4299e1; transform: scale(1.05); }
    .game-desc { font-size: 18px; line-height: 1.8; color: #718096; margin-bottom: 16px; }
    .link-tip { color: #ed8936; font-weight: 500; font-size: 16px; }
    .link-tip span { display: inline-flex; align-items: center; gap: 4px; }

    /* å›ºå®šæ—¥æœŸè¡¨å•æ ·å¼ï¼ˆä¸­é—´æ ä¸‹æ–¹ï¼‰ */
    .middle-forms-container {
      width: 100%;
      max-width: 600px;
      margin-top: auto; /* é åº•éƒ¨ */
      margin-bottom: 3vw; /* è·ç¦»åº•éƒ¨é—´è· */
      background: rgba(255,255,255,0.95);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(138,173,212,0.1);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .form-header {
      font-size: 18px;
      font-weight: 600;
      color: #4299e1;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .form-header::before { content: 'ğŸ“…'; }
    .form-row {
      display: flex;
      gap: 12px;
      width: 100%;
    }
    .middle-date-input {
      flex: 1;
      padding: 12px 16px;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      font-size: 15px;
      color: #333;
      outline: none;
      transition: all 0.3s ease;
    }
    .middle-date-input:focus {
      border-color: #4299e1;
      box-shadow: 0 0 0 3px rgba(66,153,225,0.1);
    }
    .middle-submit-btn {
      padding: 12px 20px;
      background: linear-gradient(135deg, #4299e1 0%, #38b2ac 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    .middle-submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(66,153,225,0.2);
    }
    /* ç­”ç–‘æŒ‰é’®å’ŒéŸ³é¢‘æŒ‰é’®æ€»å®½åº¦ç­‰äºä¸Šæ–¹"æ‰“å¼€ç»ƒä¹ PDF"æŒ‰é’® */
    /* åˆ›å»ºä¸€ä¸ªæŒ‰é’®ç»„å®¹å™¨ï¼Œé™åˆ¶æ€»å®½åº¦ */
    #answer-form .form-row {
      display: flex;
      align-items: stretch;
    }
    #answer-form .button-group {
      display: flex;
      gap: 12px;
      flex-shrink: 0;
      width: fit-content;
    }
    #answer-form .answer-btn {
      flex: 0 0 auto;
    }
    .podcast-form-btn {
      padding: 12px 16px;
      background: linear-gradient(135deg, #9f7aea 0%, #ed8936 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      flex: 0 0 auto;
    }
    .podcast-form-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(159,122,234,0.3);
    }
    .middle-form-hint {
      font-size: 13px;
      color: #718096;
      margin-top: 4px;
      text-align: center;
    }

    /* å“åº”å¼ï¼šå¹³æ¿ï¼ˆ768px~1023pxï¼‰ */
    @media (max-width: 1023px) and (min-width: 768px) {
      .sidebar-left { width: 240px; padding: 1.5vw; }
      .sidebar-right { width: 60px; }
      .header-landscape h1 { font-size: 24px; }
      .homework-link { padding: 10px 16px; font-size: 15px; }
      /* 3Dçƒä½“é€‚é… */
      .sphere-container { height: 180px; }
      .sphere { width: 150px; height: 150px; }
      .sphere-face { width: 38px; height: 38px; font-size: 18px; }
      .face-1 { transform: rotateY(0deg) translateZ(75px); }
      .face-2 { transform: rotateY(45deg) translateZ(75px); }
      .face-3 { transform: rotateY(90deg) translateZ(75px); }
      .face-4 { transform: rotateY(135deg) translateZ(75px); }
      .face-5 { transform: rotateY(180deg) translateZ(75px); }
      .face-6 { transform: rotateY(225deg) translateZ(75px); }
      .face-7 { transform: rotateY(270deg) translateZ(75px); }
      .face-8 { transform: rotateY(315deg) translateZ(75px); }
      .face-9 { transform: rotateX(45deg) rotateY(0deg) translateZ(75px); }
      .face-10 { transform: rotateX(45deg) rotateY(90deg) translateZ(75px); }
      .face-11 { transform: rotateX(45deg) rotateY(180deg) translateZ(75px); }
      .face-12 { transform: rotateX(45deg) rotateY(270deg) translateZ(75px); }
      .face-13 { transform: rotateX(-45deg) rotateY(0deg) translateZ(75px); }
      .face-14 { transform: rotateX(-45deg) rotateY(90deg) translateZ(75px); }
      .face-15 { transform: rotateX(-45deg) rotateY(180deg) translateZ(75px); }
      .face-16 { transform: rotateX(-45deg) rotateY(270deg) translateZ(75px); }
      /* æ¸¸æˆåŒºåŸŸé€‚é… */
      .game-link { font-size: 28px; }
      .game-desc { font-size: 16px; }
      .link-tip { font-size: 15px; }
      /* è¡¨å•é€‚é… */
      .middle-forms-container { padding: 16px; gap: 12px; }
      .form-row { gap: 8px; }
      .middle-date-input { padding: 10px 14px; font-size: 14px; }
      .middle-submit-btn { padding: 10px 16px; font-size: 14px; }
      .podcast-form-btn { padding: 10px 14px; font-size: 14px; }
    }

    /* å“åº”å¼ï¼šæ‰‹æœºï¼ˆâ‰¤767pxï¼‰ */
    @media (max-width: 767px) {
      .landscape-layout { flex-direction: column; }
      .sidebar-left { width: 100%; height: auto; padding: 12px; flex-direction: column; gap: 12px; }
      .header-landscape { flex-direction: row; gap: 12px; flex: 1; align-items: center; }
      .link-group { flex-direction: row; gap: 8px; }
      .homework-link { padding: 8px 12px; font-size: 14px; }
      /* 3Dçƒä½“æ‰‹æœºç«¯éšè— */
      .sphere-container { display: none; }
      /* æ¸¸æˆåŒºåŸŸé€‚é… */
      .game-area { flex: 1; padding: 1vw; }
      .game-link { font-size: 24px; }
      .game-desc { font-size: 15px; }
      /* è¡¨å•æ‰‹æœºç«¯é€‚é…ï¼ˆå•åˆ—å¸ƒå±€ï¼‰ */
      .middle-forms-container {
        padding: 14px;
        gap: 10px;
        margin-bottom: 2vw;
      }
      .form-row {
        flex-direction: column;
        gap: 6px;
      }
      #answer-form .button-group {
        width: 100% !important;
        flex-direction: column;
      }
      .middle-submit-btn { width: 100%; }
      .podcast-form-btn { width: 100%; }
      .sidebar-right { width: 100%; height: 50px; flex-direction: row; }
      .link-tip { font-size: 14px; }
      /* æ’­å®¢æ’­æ”¾å™¨æ‰‹æœºç«¯é€‚é… */
      .podcast-player {
        right: 10px;
        left: 10px;
        width: auto;
        bottom: 10px;
      }
      /* åƒé—®å¼¹çª—æ‰‹æœºç«¯é€‚é… */
      .qianwen-container {
        width: 95%;
        height: 90vh;
        border-radius: 16px;
      }
      .qianwen-header {
        padding: 16px 20px;
      }
      .qianwen-header h3 {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="landscape-layout">
      <!-- å·¦ä¾§ï¼šæ ‡é¢˜+é“¾æ¥+3Dçƒä½“ï¼ˆä¸­éƒ¨åä¸‹ï¼‰ -->
      <aside class="sidebar-left">
        <header class="header header-landscape">
          <h1>ğŸ¦œ <span class="fancy-title"><a href="https://voluble-travesseiro-e0d3b8.netlify.app/" target="_blank">å¤§å˜´é¸Ÿ</a></span></h1>
          <div class="link-group">
            <a href="https://xxyd.jxeduyun.com/resource/list?column=1990382413876555778&type=1990383424817065986&stage=1984079254966145025&grade=1984165535347896322&subject=1984193942848700417&version=1990248132042153985&volume=1990250167030374402" id="daily-homework" class="homework-link" target="_blank">åŸºç¡€ä½œä¸š</a>
            <a href="https://xxyd.jxeduyun.com/resource/list?column=1990382444880850946&type=1990383424817065986&stage=1984079254966145025&grade=1984165535347896322&subject=1984193942848700417&version=1990248132042153985&volume=1990250167030374402" id="homework-answer" class="homework-link" target="_blank">æå‡ä½œä¸š</a>
            <a href="https://basic.smartedu.cn/syncClassroom?defaultTag=e7bbce2c-0590-11ed-9c79-92fc3b3249d5%2F44bebf7c-54e6-11ed-9c34-850ba61fa9f4%2F6a749654-0772-11ed-ac74-092ab92074e6%2F44bee8bc-54e6-11ed-9c34-850ba61fa9f4%2Fff8080814371757b014390f883db0453%2F5136342961" id="teacher-classroom" class="homework-link" target="_blank">åå¸ˆè¯¾å ‚</a>
          </div>
        </header>

        <!-- 3Dçƒä½“æ•ˆæœï¼ˆå·¦æ ä¸­éƒ¨åä¸‹ï¼‰ -->
        <div class="sphere-container">
          <div class="sphere">
            <!-- åäºŒç”Ÿè‚–å›¾æ ‡ -->
            <div class="sphere-face face-1">ğŸ­</div> <!-- é¼  -->
            <div class="sphere-face face-2">ğŸ®</div> <!-- ç‰› -->
            <div class="sphere-face face-3">ğŸ¯</div> <!-- è™ -->
            <div class="sphere-face face-4">ğŸ°</div> <!-- å…” -->
            <div class="sphere-face face-5">ğŸ²</div> <!-- é¾™ -->
            <div class="sphere-face face-6">ğŸ</div> <!-- è›‡ -->
            <div class="sphere-face face-7">ğŸ´</div> <!-- é©¬ -->
            <div class="sphere-face face-8">ğŸ‘</div> <!-- ç¾Š -->
            <div class="sphere-face face-9">ğŸµ</div> <!-- çŒ´ -->
            <div class="sphere-face face-10">ğŸ”</div> <!-- é¸¡ -->
            <div class="sphere-face face-11">ğŸ¶</div> <!-- ç‹— -->
            <div class="sphere-face face-12">ğŸ·</div> <!-- çŒª -->
            <!-- é¢å¤–4ç§å¸¸è§åŠ¨ç‰©å›¾æ ‡ -->
            <div class="sphere-face face-13">ğŸ±</div> <!-- çŒ« -->
            <div class="sphere-face face-14">ğŸ </div> <!-- é±¼ -->
            <div class="sphere-face face-15">ğŸ¦œ</div> <!-- é¸Ÿï¼ˆå‘¼åº”å¤§å˜´é¸Ÿä¸»é¢˜ï¼‰ -->
            <div class="sphere-face face-16">ğŸ¦Œ</div> <!-- é¹¿ -->
          </div>
        </div>
      </aside>

      <!-- ä¸­é—´ï¼šæ¸¸æˆå…¥å£ï¼ˆä¸Šæ–¹ï¼‰+ æŸ¥è¯¢è¡¨å•ï¼ˆä¸‹æ–¹ï¼‰ -->
      <main class="game-area">
        <!-- æ¸¸æˆå…¥å£ï¼ˆä¸Šæ–¹å±…ä¸­ï¼‰ -->
        <div class="game-link-container">
          <a href="https://voluble-travesseiro-e0d3b8.netlify.app/" class="game-link" target="_blank">åœ¨æ¸¸æˆä¸­å­¦ä¹ </a>
          <p class="game-desc">ç‚¹å‡»ä¸Šæ–¹æ ‡é¢˜è¿›å…¥å¤§å˜´é¸Ÿå­—è¯å­¦ä¹ æ¸¸æˆï¼Œæå‡å­—è¯è®¤çŸ¥èƒ½åŠ›ï¼</p>
          <p class="link-tip">
            <span>ğŸ”— å·¦ä¾§ã€ŒåŸºç¡€ä½œä¸šã€ã€Œæå‡ä½œä¸šã€å°†åœ¨æ–°çª—å£æ‰“å¼€èµ„æºé¡µé¢</span><br>
            <span>ğŸ“Œ è‹¥é“¾æ¥æ— æ³•æ‰“å¼€ï¼Œå¯è”ç³»ç®¡ç†å‘˜è·å–å¸®åŠ©</span>
          </p>
        </div>

        <!-- å›ºå®šæ—¥æœŸæŸ¥è¯¢è¡¨å•ï¼ˆä¸‹æ–¹ï¼‰ -->
        <div class="middle-forms-container">
          <div class="form-header">å›ºå®šæ—¥æœŸèµ„æºæŸ¥è¯¢</div>
          <!-- è¡¨å•ä¸€ï¼šå›ºå®šæ—¥æœŸç»ƒä¹  -->
          <form class="form-row" id="practice-form">
            <input type="text" class="middle-date-input" id="practice-date" placeholder="è¾“å…¥æ—¥æœŸ(yyyymmdd)" pattern="[0-9]{8}" required>
            <button type="submit" class="middle-submit-btn">æ‰“å¼€ç»ƒä¹ PDF</button>
          </form>
          <!-- è¡¨å•äºŒï¼šå›ºå®šæ—¥æœŸç­”ç–‘ -->
          <form class="form-row" id="answer-form">
            <input type="text" class="middle-date-input" id="answer-date" placeholder="è¾“å…¥æ—¥æœŸ(yyyymmdd)" pattern="[0-9]{8}" required>
            <div class="button-group">
              <button type="submit" class="middle-submit-btn answer-btn">ç­”ç–‘</button>
              <button type="button" class="podcast-form-btn" id="answer-podcast-btn" title="æ’­æ”¾ç­”ç–‘éŸ³é¢‘">ğŸ™ï¸</button>
            </div>
          </form>
          <p class="middle-form-hint">ç¤ºä¾‹ï¼š20251124ï¼ˆä»…æ”¯æŒ20251124åŠä¹‹åæœ‰æ•ˆæ—¥æœŸï¼‰</p>
        </div>
      </main>

      <!-- å³ä¾§ï¼šAIåŠ©æ‰‹ -->
      <aside class="sidebar-right">
        <button class="ai-assistant-btn" id="ai-assistant-btn" title="é€šä¹‰åƒé—®AIåŠ©æ‰‹">ğŸ¤–</button>
      </aside>
    </div>
    
    <!-- é€šä¹‰åƒé—®AIå¼¹çª— -->
    <div class="qianwen-modal" id="qianwen-modal">
      <div class="qianwen-container">
        <div class="qianwen-header">
          <h3>
            <span class="qianwen-logo">ğŸ¤–</span>
            <span>é€šä¹‰åƒé—® AIåŠ©æ‰‹</span>
          </h3>
          <button class="qianwen-close" id="qianwen-close">Ã—</button>
        </div>
        <div class="qianwen-iframe-container">
          <div class="qianwen-loading" id="qianwen-loading">
            <div class="qianwen-loading-spinner"></div>
            <div>æ­£åœ¨åŠ è½½é€šä¹‰åƒé—®...</div>
          </div>
          <iframe 
            class="qianwen-iframe" 
            id="qianwen-iframe"
            src="https://www.qianwen.com/"
            allow="microphone; camera"
            allowfullscreen
            loading="lazy"
            onload="document.getElementById('qianwen-loading').style.display='none'"
          ></iframe>
        </div>
      </div>
    </div>
    
    <!-- è±†åŒ…AIæ’­å®¢æ’­æ”¾å™¨ -->
    <div class="podcast-player" id="podcast-player">
      <div class="podcast-header">
        <h3>ğŸ™ï¸ è±†åŒ…AIæ’­å®¢</h3>
        <button class="podcast-close" id="podcast-close">Ã—</button>
      </div>
      <div class="podcast-content">
        <div class="podcast-info">
          <div class="podcast-title">è±†åŒ…AIæ’­å®¢</div>
          <div class="podcast-desc">è†å¬AIç”Ÿæˆçš„æœ‰å£°å†…å®¹ï¼Œè®©å­¦ä¹ æ›´è½»æ¾</div>
          <div class="podcast-link" id="podcast-link" style="display: none; margin-top: 8px; font-size: 12px; color: #718096; word-break: break-all;">
            <strong>éŸ³é¢‘é“¾æ¥ï¼š</strong><span id="podcast-link-text"></span>
          </div>
        </div>
        <audio id="podcast-audio" preload="metadata"></audio>
        <div class="podcast-controls">
          <button class="podcast-play-btn" id="podcast-play-btn">â–¶</button>
          <div class="podcast-progress">
            <div class="podcast-progress-bar" id="podcast-progress-bar">
              <div class="podcast-progress-filled" id="podcast-progress-filled"></div>
            </div>
            <div class="podcast-time">
              <span id="podcast-current-time">00:00</span>
              <span id="podcast-duration">00:00</span>
            </div>
          </div>
          <div class="podcast-volume">
            <button class="podcast-volume-btn" id="podcast-volume-btn">ğŸ”Š</button>
            <div class="podcast-volume-slider" id="podcast-volume-slider">
              <div class="podcast-volume-filled" id="podcast-volume-filled"></div>
            </div>
          </div>
        </div>
        <div style="text-align: center; margin-top: 10px;">
          <a href="https://www.doubao.com/podcast" target="_blank" style="color: #9f7aea; text-decoration: none; font-size: 14px;">è®¿é—®è±†åŒ…AIæ’­å®¢å®˜ç½‘ â†’</a>
        </div>
      </div>
    </div>
    </div>
  </div>

  <script>
    // éªŒè¯æ—¥æœŸæ˜¯å¦åˆæ³•ï¼ˆyyyymmddæ ¼å¼ + æœ‰æ•ˆæ—¥æœŸ + 20251124åŠä¹‹åï¼‰
    function isValidDate(dateStr) {
      // 1. éªŒè¯æ˜¯å¦ä¸º8ä½æ•°å­—
      if (!/^\d{8}$/.test(dateStr)) return false;
      
      // 2. è§£ææ—¥æœŸ
      const year = parseInt(dateStr.slice(0, 4));
      const month = parseInt(dateStr.slice(4, 6)) - 1; // æœˆä»½ä»0å¼€å§‹
      const day = parseInt(dateStr.slice(6, 8));
      const inputDate = new Date(year, month, day);
      
      // 3. éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§ï¼ˆé¿å…20250230ç­‰æ— æ•ˆæ—¥æœŸï¼‰
      const isDateValid = (
        inputDate.getFullYear() === year &&
        inputDate.getMonth() === month &&
        inputDate.getDate() === day
      );
      if (!isDateValid) return false;
      
      // 4. éªŒè¯æ—¥æœŸæ˜¯å¦â‰¥20251124
      const minDate = new Date(2025, 10, 24); // 2025å¹´11æœˆ24æ—¥ï¼ˆæœˆä»½0=1æœˆï¼‰
      return inputDate >= minDate;
    }

    // ç”ŸæˆæŒ‡å®šæ—¥æœŸçš„PDFé“¾æ¥
    function generatePdfLinks(dateStr) {
      return {
        homework: `https://voluble-travesseiro-e0d3b8.netlify.app/zx/${dateStr}quiz.pdf`,
        answer: `https://voluble-travesseiro-e0d3b8.netlify.app/zx/${dateStr}ans.pdf`
      };
    }

    // è®¾ç½®ç­”ç–‘å’ŒéŸ³é¢‘æŒ‰é’®çš„æ€»å®½åº¦ç­‰äº"æ‰“å¼€ç»ƒä¹ PDF"æŒ‰é’®çš„å®½åº¦
    function adjustAnswerButtonsWidth() {
      const practiceBtn = document.querySelector('#practice-form .middle-submit-btn');
      const buttonGroup = document.querySelector('#answer-form .button-group');
      
      if (practiceBtn && buttonGroup) {
        const practiceBtnWidth = practiceBtn.offsetWidth;
        buttonGroup.style.width = practiceBtnWidth + 'px';
      }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåè°ƒæ•´æŒ‰é’®å®½åº¦
    window.addEventListener('load', adjustAnswerButtonsWidth);
    // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è°ƒæ•´
    window.addEventListener('resize', adjustAnswerButtonsWidth);
    // DOMContentLoadedæ—¶ä¹Ÿæ‰§è¡Œä¸€æ¬¡
    document.addEventListener('DOMContentLoaded', adjustAnswerButtonsWidth);

    // å›ºå®šæ—¥æœŸè¡¨å•æäº¤äº‹ä»¶ï¼ˆç»ƒä¹ è¡¨å•ï¼‰
    document.getElementById('practice-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // æ— è®ºè¾“å…¥æ¡†æ˜¯å¦æœ‰å€¼ï¼Œéƒ½ä»ä»Šæ—¥å¼€å§‹æŸ¥æ‰¾å¯ç”¨çš„PDFé“¾æ¥
      console.log('å¼€å§‹æŸ¥æ‰¾å¯ç”¨çš„ç»ƒä¹ PDFé“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹ï¼‰...');
      const result = await findAvailablePracticePdfLink(30);
      
      if (!result) {
        alert('æœªæ‰¾åˆ°å¯ç”¨çš„ç»ƒä¹ PDFæ–‡ä»¶ã€‚è¯·ç¡®è®¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚');
        return;
      }
      
      const dateStr = result.dateStr;
      document.getElementById('practice-date').value = dateStr;
      const practiceLink = result.pdfLink;
      window.open(practiceLink, '_blank');
      console.log(`æ‰“å¼€ç»ƒä¹ PDFé“¾æ¥: ${practiceLink} (æ—¥æœŸ: ${dateStr})`);
    });

    // è·å–ç­”ç–‘PDFé“¾æ¥çš„è¾…åŠ©å‡½æ•°ï¼ˆç»Ÿä¸€ä½¿ç”¨æ­¤å‡½æ•°ç”ŸæˆPDFé“¾æ¥ï¼‰
    function getAnswerPdfLink(dateStr) {
      // ä½¿ç”¨ä¸"æ‰“å¼€ç­”ç–‘PDF"æŒ‰é’®å®Œå…¨ç›¸åŒçš„ç”Ÿæˆé€»è¾‘
      return generatePdfLinks(dateStr).answer;
    }

    // ç”ŸæˆéŸ³é¢‘é“¾æ¥ï¼ˆå°†ç­”ç–‘PDFé“¾æ¥çš„.pdfæ”¹ä¸º.wavï¼‰
    function generateAudioLink(dateStr) {
      const answerPdfLink = getAnswerPdfLink(dateStr);
      return answerPdfLink.replace('.pdf', '.wav');
    }

    // è·å–æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆyyyymmddæ ¼å¼ï¼‰
    function getDateString(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      return `${year}${month}${day}`;
    }

    // è·å–ä»Šæ—¥æ—¥æœŸå­—ç¬¦ä¸²
    function getTodayDateString() {
      return getDateString(new Date());
    }

    // è·å–å‰Nå¤©çš„æ—¥æœŸå­—ç¬¦ä¸²
    function getPreviousDateString(daysAgo = 1) {
      const date = new Date();
      date.setDate(date.getDate() - daysAgo);
      return getDateString(date);
    }

    // æ£€æŸ¥PDFé“¾æ¥æ˜¯å¦å­˜åœ¨ï¼ˆé€šè¿‡fetch GETè¯·æ±‚æ£€æŸ¥ï¼‰
    async function checkPdfLinkExists(pdfLink) {
      return new Promise((resolve) => {
        let resolved = false;
        
        // ä½¿ç”¨fetch GETè¯·æ±‚æ£€æŸ¥PDF
        fetch(pdfLink, {
          method: 'GET',
          mode: 'no-cors',
          cache: 'no-cache'
        })
        .then(() => {
          // no-corsæ¨¡å¼ä¸‹æ— æ³•è¯»å–çŠ¶æ€ï¼Œä½¿ç”¨iframeéªŒè¯
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.style.position = 'absolute';
          iframe.style.left = '-9999px';
          iframe.style.width = '1px';
          iframe.style.height = '1px';
          
          let checkResolved = false;
          
          const cleanup = () => {
            if (iframe.parentNode) {
              document.body.removeChild(iframe);
            }
          };
          
          // è®¾ç½®è¶…æ—¶
          const timeout = setTimeout(() => {
            if (!checkResolved) {
              checkResolved = true;
              cleanup();
              if (!resolved) {
                resolved = true;
                // è¶…æ—¶å¯èƒ½å› ä¸ºæ–‡ä»¶è¾ƒå¤§ï¼Œå‡è®¾å­˜åœ¨
                resolve(true);
              }
            }
          }, 2000);
          
          iframe.onload = () => {
            if (!checkResolved) {
              checkResolved = true;
              clearTimeout(timeout);
              cleanup();
              if (!resolved) {
                resolved = true;
                resolve(true);
              }
            }
          };
          
          iframe.onerror = () => {
            if (!checkResolved) {
              checkResolved = true;
              clearTimeout(timeout);
              cleanup();
              if (!resolved) {
                resolved = true;
                resolve(false);
              }
            }
          };
          
          iframe.src = pdfLink;
          document.body.appendChild(iframe);
        })
        .catch(() => {
          if (!resolved) {
            resolved = true;
            // å¦‚æœfetchå¤±è´¥ï¼Œå°è¯•ç›´æ¥æ£€æŸ¥
            resolve(true);
          }
        });
      });
    }

    // æ£€æŸ¥éŸ³é¢‘é“¾æ¥æ˜¯å¦å­˜åœ¨
    async function checkAudioLinkExists(audioLink) {
      return new Promise((resolve) => {
        const audio = new Audio();
        let resolved = false;
        
        const cleanup = () => {
          audio.oncanplaythrough = null;
          audio.onerror = null;
          audio.onloadstart = null;
          audio.src = '';
        };
        
        audio.oncanplaythrough = () => {
          if (!resolved) {
            resolved = true;
            cleanup();
            resolve(true);
          }
        };
        
        audio.onerror = () => {
          if (!resolved) {
            resolved = true;
            cleanup();
            resolve(false);
          }
        };
        
        audio.onloadstart = () => {
          // å¼€å§‹åŠ è½½ï¼Œç­‰å¾…ç»“æœ
        };
        
        audio.src = audioLink;
        audio.load();
        
        // è®¾ç½®è¶…æ—¶ï¼ˆ3ç§’ï¼‰
        setTimeout(() => {
          if (!resolved) {
            resolved = true;
            cleanup();
            resolve(false);
          }
        }, 3000);
      });
    }

    // æŸ¥æ‰¾å­˜åœ¨çš„ç»ƒä¹ PDFé“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹å¾€å‰æŸ¥æ‰¾ï¼‰
    async function findAvailablePracticePdfLink(maxDays = 30) {
      let currentDate = new Date();
      
      for (let i = 0; i < maxDays; i++) {
        const dateStr = getDateString(currentDate);
        
        // æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆï¼ˆâ‰¥20251124ï¼‰
        if (!isValidDate(dateStr)) {
          break;
        }
        
        const pdfLink = generatePdfLinks(dateStr).homework;
        console.log(`æ£€æŸ¥ç»ƒä¹ PDFé“¾æ¥ (${i === 0 ? 'ä»Šæ—¥' : `${i}å¤©å‰`}): ${pdfLink}`);
        
        const exists = await checkPdfLinkExists(pdfLink);
        if (exists) {
          console.log(`æ‰¾åˆ°å­˜åœ¨çš„ç»ƒä¹ PDFé“¾æ¥: ${pdfLink}`);
          return { pdfLink, dateStr };
        }
        
        // å¾€å‰æ¨ä¸€å¤©
        currentDate.setDate(currentDate.getDate() - 1);
      }
      
      return null;
    }

    // æŸ¥æ‰¾å­˜åœ¨çš„ç­”ç–‘PDFé“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹å¾€å‰æŸ¥æ‰¾ï¼‰
    async function findAvailableAnswerPdfLink(maxDays = 30) {
      let currentDate = new Date();
      
      for (let i = 0; i < maxDays; i++) {
        const dateStr = getDateString(currentDate);
        
        // æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆï¼ˆâ‰¥20251124ï¼‰
        if (!isValidDate(dateStr)) {
          break;
        }
        
        const pdfLink = getAnswerPdfLink(dateStr);
        console.log(`æ£€æŸ¥ç­”ç–‘PDFé“¾æ¥ (${i === 0 ? 'ä»Šæ—¥' : `${i}å¤©å‰`}): ${pdfLink}`);
        
        const exists = await checkPdfLinkExists(pdfLink);
        if (exists) {
          console.log(`æ‰¾åˆ°å­˜åœ¨çš„ç­”ç–‘PDFé“¾æ¥: ${pdfLink}`);
          return { pdfLink, dateStr };
        }
        
        // å¾€å‰æ¨ä¸€å¤©
        currentDate.setDate(currentDate.getDate() - 1);
      }
      
      return null;
    }

    // æŸ¥æ‰¾å­˜åœ¨çš„éŸ³é¢‘é“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹å¾€å‰æŸ¥æ‰¾ï¼‰
    async function findAvailableAudioLink(maxDays = 30) {
      // é¦–å…ˆå°è¯•ä»Šæ—¥
      let currentDate = new Date();
      
      for (let i = 0; i < maxDays; i++) {
        const dateStr = getDateString(currentDate);
        
        // æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆï¼ˆâ‰¥20251124ï¼‰
        if (!isValidDate(dateStr)) {
          break;
        }
        
        const audioLink = generateAudioLink(dateStr);
        console.log(`æ£€æŸ¥éŸ³é¢‘é“¾æ¥ (${i === 0 ? 'ä»Šæ—¥' : `${i}å¤©å‰`}): ${audioLink}`);
        
        const exists = await checkAudioLinkExists(audioLink);
        if (exists) {
          console.log(`æ‰¾åˆ°å­˜åœ¨çš„éŸ³é¢‘é“¾æ¥: ${audioLink}`);
          return { audioLink, dateStr };
        }
        
        // å¾€å‰æ¨ä¸€å¤©
        currentDate.setDate(currentDate.getDate() - 1);
      }
      
      return null;
    }

    // å›ºå®šæ—¥æœŸè¡¨å•æäº¤äº‹ä»¶ï¼ˆç­”ç–‘è¡¨å•ï¼‰
    document.getElementById('answer-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // æ— è®ºè¾“å…¥æ¡†æ˜¯å¦æœ‰å€¼ï¼Œéƒ½ä»ä»Šæ—¥å¼€å§‹æŸ¥æ‰¾å¯ç”¨çš„PDFé“¾æ¥
      console.log('å¼€å§‹æŸ¥æ‰¾å¯ç”¨çš„ç­”ç–‘PDFé“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹ï¼‰...');
      const result = await findAvailableAnswerPdfLink(30);
      
      if (!result) {
        alert('æœªæ‰¾åˆ°å¯ç”¨çš„ç­”ç–‘PDFæ–‡ä»¶ã€‚è¯·ç¡®è®¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚');
        return;
      }
      
      const dateStr = result.dateStr;
      document.getElementById('answer-date').value = dateStr;
      const answerLink = result.pdfLink;
      window.open(answerLink, '_blank');
      console.log(`æ‰“å¼€ç­”ç–‘PDFé“¾æ¥: ${answerLink} (æ—¥æœŸ: ${dateStr})`);
    });

    // ç­”ç–‘PDFçš„AIæ’­å®¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('answer-podcast-btn').addEventListener('click', async function() {
      // æ‰“å¼€æ’­æ”¾å™¨
      podcastPlayer.classList.add('active');
      
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      podcastPlayBtn.textContent = 'â³';
      podcastPlayBtn.disabled = true;
      
      // æŸ¥æ‰¾å­˜åœ¨çš„éŸ³é¢‘é“¾æ¥ï¼ˆä»ä»Šæ—¥å¼€å§‹å¾€å‰æŸ¥æ‰¾ï¼‰
      console.log('å¼€å§‹æŸ¥æ‰¾å¯ç”¨çš„éŸ³é¢‘é“¾æ¥...');
      const result = await findAvailableAudioLink(30);
      
      if (!result) {
        podcastPlayBtn.textContent = 'â–¶';
        podcastPlayBtn.disabled = false;
        alert('æœªæ‰¾åˆ°å¯ç”¨çš„éŸ³é¢‘æ–‡ä»¶ã€‚è¯·ç¡®è®¤éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚');
        return;
      }
      
      const { audioLink, dateStr } = result;
      console.log(`æ‰¾åˆ°éŸ³é¢‘é“¾æ¥: ${audioLink} (æ—¥æœŸ: ${dateStr})`);
      
      // æ›´æ–°è¾“å…¥æ¡†æ˜¾ç¤ºæ‰¾åˆ°çš„æ—¥æœŸï¼ˆå¦‚æœè¾“å…¥æ¡†ä¸ºç©ºï¼‰
      const answerDateInput = document.getElementById('answer-date');
      if (answerDateInput && answerDateInput.value.trim() === '') {
        answerDateInput.value = dateStr;
      }
      
      // ç§»é™¤ä¹‹å‰çš„é”™è¯¯ç›‘å¬å™¨ï¼ˆé¿å…é‡å¤ç»‘å®šï¼‰
      podcastAudio.onerror = null;
      podcastAudio.oncanplay = null;
      podcastAudio.onloadstart = null;
      
      // è®¾ç½®éŸ³é¢‘æº
      podcastAudio.src = audioLink;
      
      // æ˜¾ç¤ºéŸ³é¢‘é“¾æ¥
      const podcastLinkDiv = document.getElementById('podcast-link');
      const podcastLinkText = document.getElementById('podcast-link-text');
      podcastLinkDiv.style.display = 'block';
      podcastLinkText.textContent = audioLink;
      podcastLinkText.style.cursor = 'pointer';
      podcastLinkText.title = 'ç‚¹å‡»å¤åˆ¶é“¾æ¥';
      podcastLinkText.onclick = function() {
        navigator.clipboard.writeText(audioLink).then(() => {
          alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š\n' + audioLink);
        }).catch(() => {
          // å¦‚æœå¤åˆ¶å¤±è´¥ï¼Œå°è¯•é€‰ä¸­æ–‡æœ¬
          const range = document.createRange();
          range.selectNode(podcastLinkText);
          window.getSelection().removeAllRanges();
          window.getSelection().addRange(range);
          alert('è¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥ï¼š\n' + audioLink);
        });
      };
      
      // ç›‘å¬éŸ³é¢‘åŠ è½½é”™è¯¯
      podcastAudio.onerror = function(e) {
        console.error('éŸ³é¢‘åŠ è½½é”™è¯¯:', e);
        console.error('é”™è¯¯è¯¦æƒ…:', podcastAudio.error);
        podcastPlayBtn.textContent = 'â–¶';
        podcastPlayBtn.disabled = false;
        
        let errorMsg = 'éŸ³é¢‘åŠ è½½å¤±è´¥ã€‚\n\n';
        errorMsg += 'PDFé“¾æ¥ï¼š' + answerPdfLink + '\n';
        errorMsg += 'éŸ³é¢‘é“¾æ¥ï¼š' + audioLink + '\n\n';
        
        if (podcastAudio.error) {
          switch(podcastAudio.error.code) {
            case podcastAudio.error.MEDIA_ERR_ABORTED:
              errorMsg += 'é”™è¯¯ï¼šç”¨æˆ·ä¸­æ­¢åŠ è½½';
              break;
            case podcastAudio.error.MEDIA_ERR_NETWORK:
              errorMsg += 'é”™è¯¯ï¼šç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥\n';
              errorMsg += 'æç¤ºï¼šå¯èƒ½æ˜¯CORSè·¨åŸŸé—®é¢˜ï¼ŒéŸ³é¢‘æœåŠ¡å™¨éœ€è¦å…è®¸è·¨åŸŸè®¿é—®';
              break;
            case podcastAudio.error.MEDIA_ERR_DECODE:
              errorMsg += 'é”™è¯¯ï¼šéŸ³é¢‘è§£ç å¤±è´¥';
              break;
            case podcastAudio.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
              errorMsg += 'é”™è¯¯ï¼šéŸ³é¢‘æ ¼å¼ä¸æ”¯æŒæˆ–æ–‡ä»¶ä¸å­˜åœ¨\n';
              errorMsg += 'æç¤ºï¼šè¯·ç¡®è®¤éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæˆ–å°è¯•ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€éŸ³é¢‘é“¾æ¥';
              break;
            default:
              errorMsg += 'é”™è¯¯ï¼šæœªçŸ¥é”™è¯¯ (é”™è¯¯ä»£ç : ' + podcastAudio.error.code + ')';
          }
        } else {
          errorMsg += 'é”™è¯¯ï¼šæ— æ³•åŠ è½½éŸ³é¢‘æ–‡ä»¶\n';
          errorMsg += 'å¯èƒ½åŸå› ï¼š\n';
          errorMsg += '1. éŸ³é¢‘æ–‡ä»¶ä¸å­˜åœ¨\n';
          errorMsg += '2. CORSè·¨åŸŸé™åˆ¶\n';
          errorMsg += '3. ç½‘ç»œè¿æ¥é—®é¢˜';
        }
        
        errorMsg += '\n\nè°ƒè¯•ä¿¡æ¯ï¼š\n';
        errorMsg += 'è¯·åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆæŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼‰';
        alert(errorMsg);
      };
      
      // ç›‘å¬éŸ³é¢‘å¯ä»¥æ’­æ”¾
      podcastAudio.oncanplay = function() {
        console.log('éŸ³é¢‘åŠ è½½æˆåŠŸï¼Œå¯ä»¥æ’­æ”¾');
        podcastPlayBtn.textContent = 'â–¶';
        podcastPlayBtn.disabled = false;
        
        // è‡ªåŠ¨æ’­æ”¾
        podcastAudio.play().then(() => {
          podcastPlayBtn.textContent = 'â¸';
          console.log('éŸ³é¢‘æ’­æ”¾æˆåŠŸ');
        }).catch((playError) => {
          console.error('æ’­æ”¾å¤±è´¥:', playError);
          podcastPlayBtn.textContent = 'â–¶';
          let playErrorMsg = 'æ’­æ”¾å¤±è´¥ï¼š' + playError.message + '\n\n';
          playErrorMsg += 'éŸ³é¢‘é“¾æ¥ï¼š' + audioLink + '\n\n';
          playErrorMsg += 'æç¤ºï¼šæŸäº›æµè§ˆå™¨å¯èƒ½é˜»æ­¢è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾æŒ‰é’®';
          alert(playErrorMsg);
        });
      };
      
      // ç›‘å¬éŸ³é¢‘åŠ è½½è¿›åº¦
      podcastAudio.onloadstart = function() {
        console.log('å¼€å§‹åŠ è½½éŸ³é¢‘...');
      };
      
      // ç›‘å¬éŸ³é¢‘å…ƒæ•°æ®åŠ è½½
      podcastAudio.onloadedmetadata = function() {
        console.log('éŸ³é¢‘å…ƒæ•°æ®åŠ è½½å®Œæˆï¼Œæ—¶é•¿ï¼š', podcastAudio.duration, 'ç§’');
      };
      
      // å¼€å§‹åŠ è½½éŸ³é¢‘
      podcastAudio.load();
    });

    // é€šä¹‰åƒé—®AIåŠ©æ‰‹åŠŸèƒ½
    const aiAssistantBtn = document.getElementById('ai-assistant-btn');

    // ç‚¹å‡»æŒ‰é’®åœ¨æ–°çª—å£æ‰“å¼€åƒé—®ç½‘ç«™
    aiAssistantBtn.addEventListener('click', () => {
      window.open('https://www.qianwen.com/', '_blank', 'noopener,noreferrer');
    });

    // è±†åŒ…AIæ’­å®¢åŠŸèƒ½ï¼ˆä¿ç•™ï¼Œä¾›è¡¨å•ä¸­çš„æ’­å®¢æŒ‰é’®ä½¿ç”¨ï¼‰
    const podcastPlayer = document.getElementById('podcast-player');
    const podcastClose = document.getElementById('podcast-close');
    const podcastAudio = document.getElementById('podcast-audio');
    const podcastPlayBtn = document.getElementById('podcast-play-btn');
    const podcastProgressBar = document.getElementById('podcast-progress-bar');
    const podcastProgressFilled = document.getElementById('podcast-progress-filled');
    const podcastCurrentTime = document.getElementById('podcast-current-time');
    const podcastDuration = document.getElementById('podcast-duration');
    const podcastVolumeBtn = document.getElementById('podcast-volume-btn');
    const podcastVolumeSlider = document.getElementById('podcast-volume-slider');
    const podcastVolumeFilled = document.getElementById('podcast-volume-filled');

    // å…³é—­æ’­æ”¾å™¨
    podcastClose.addEventListener('click', () => {
      podcastPlayer.classList.remove('active');
      podcastAudio.pause();
      podcastPlayBtn.textContent = 'â–¶';
    });

    // æ ¼å¼åŒ–æ—¶é—´
    function formatTime(seconds) {
      if (isNaN(seconds)) return '00:00';
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    // æ’­æ”¾/æš‚åœ
    podcastPlayBtn.addEventListener('click', () => {
      if (podcastAudio.paused) {
        if (!podcastAudio.src) {
          alert('è¯·å…ˆè®¾ç½®æ’­å®¢éŸ³é¢‘æº');
          return;
        }
        podcastAudio.play();
        podcastPlayBtn.textContent = 'â¸';
      } else {
        podcastAudio.pause();
        podcastPlayBtn.textContent = 'â–¶';
      }
    });

    // æ›´æ–°è¿›åº¦æ¡
    podcastAudio.addEventListener('timeupdate', () => {
      const percent = (podcastAudio.currentTime / podcastAudio.duration) * 100;
      podcastProgressFilled.style.width = percent + '%';
      podcastCurrentTime.textContent = formatTime(podcastAudio.currentTime);
    });

    // æ›´æ–°æ€»æ—¶é•¿
    podcastAudio.addEventListener('loadedmetadata', () => {
      podcastDuration.textContent = formatTime(podcastAudio.duration);
    });

    // ç‚¹å‡»è¿›åº¦æ¡è·³è½¬
    podcastProgressBar.addEventListener('click', (e) => {
      const rect = podcastProgressBar.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      podcastAudio.currentTime = percent * podcastAudio.duration;
    });

    // éŸ³é‡æ§åˆ¶
    let isMuted = false;
    let savedVolume = 1;
    podcastVolumeBtn.addEventListener('click', () => {
      if (isMuted) {
        podcastAudio.volume = savedVolume;
        podcastVolumeBtn.textContent = 'ğŸ”Š';
        isMuted = false;
      } else {
        savedVolume = podcastAudio.volume;
        podcastAudio.volume = 0;
        podcastVolumeBtn.textContent = 'ğŸ”‡';
        isMuted = true;
      }
      updateVolumeDisplay();
    });

    podcastVolumeSlider.addEventListener('click', (e) => {
      const rect = podcastVolumeSlider.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      podcastAudio.volume = Math.max(0, Math.min(1, percent));
      isMuted = podcastAudio.volume === 0;
      podcastVolumeBtn.textContent = isMuted ? 'ğŸ”‡' : 'ğŸ”Š';
      updateVolumeDisplay();
    });

    function updateVolumeDisplay() {
      const percent = podcastAudio.volume * 100;
      podcastVolumeFilled.style.width = percent + '%';
    }

    // åˆå§‹åŒ–éŸ³é‡
    podcastAudio.volume = 0.7;
    updateVolumeDisplay();

    // æ’­æ”¾ç»“æŸ
    podcastAudio.addEventListener('ended', () => {
      podcastPlayBtn.textContent = 'â–¶';
      podcastProgressFilled.style.width = '0%';
      podcastCurrentTime.textContent = '00:00';
    });
  </script>
</body>
</html>
